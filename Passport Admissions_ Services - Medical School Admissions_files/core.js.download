(function(){let e,t=this,r=t.document;const n=r.currentScript.src;let i=n.substr(0,n.lastIndexOf("/")+1),o=r.body||r.head,s=o.querySelector("iframe#sleeknote");s?e=s.contentWindow:(o.insertAdjacentHTML("beforeend",'<iframe id=sleeknote style="display:none!important" aria-hidden="true"></iframe>'),e=o.lastElementChild.contentWindow,e.promises=[]);let a="";if(!i.includes("local.sleeknote.com")){let e=n.split("/").pop().split(".")[0];a=(e.split("-")[1]||"production")+"/"}let l=new e.URL(t.location),c=new e.URLSearchParams(l.search);if(c.has("snhide"))return;let u=n.split("#")[1]||"SleekNote",d="https://local.sleeknote.com",m=(c.has("snlocal")||e.local)&&!n.includes(d),p=c.get("snbranch");if(m||p){let n=r.createElement("script");return n.charset="utf-8",m?(c.delete("snlocal"),n.src=d,e.local=!0):(c.delete("snbranch"),n.src="https://core-branches.sleeknote.com/branch-"+p),t.history.replaceState(null,null,r.location.origin+r.location.pathname+"?"+c.toString()),n.src+="/frontend2/core.js#"+u,void r.head.appendChild(n)}if(!t.sndefine){let n=Object.create(null),o=Object.create(null);function f(t){let s=e.Promise.resolve();return n[t]||(s=new e.Promise(((e,n)=>{if(o[t])o[t].resolve.push(e),o[t].reject.push(n);else{o[t]={resolve:[e],reject:[n]};let s=r.createElement("script");s.src=i+a+(~t.indexOf(".js")?t:t+".js"),s.name=t,s.async=!0,s.charset="utf-8",r.head.appendChild(s),s.onload=function(){o[t].resolve.forEach((e=>{e()}))},s.onerror=function(e){throw o[t].reject.forEach((e=>{e()})),new Error("Error loading: "+e.currentTarget.src)}}}))),s.then((()=>n[t]))}Object.defineProperty(t,"sndefine",{value:function(...i){var o="string"==typeof i[0]?i.shift():r.currentScript.name,s=Array.isArray(i[0])?i.shift():[],a=i[0];n[o]||(n[o]=e.Promise.resolve().then((()=>e.Promise.all(s.map(f)).then((e=>a.apply(t,e))))))}}),Object.defineProperty(t,"arequire",{value:function(t){return new e.Promise((r=>{!function(t,r){e.Promise.all(t.map(f)).then((e=>{r&&r.apply(this,e)}))}([t],(function(e){return r(e)}))}))}}),n.global=e.Promise.resolve().then((()=>{const t=["fetch","FormData","setInterval","setTimeout","clearInterval","clearTimeout"];return new e.Proxy({},{get(r,n){let i=e[n];return t.includes(n)&&(i=i.bind(e)),i}})})),n["core-sleeknote"]=e.Promise.resolve().then((()=>{t.dev||(t.dev=Object.create(null));let r=Object.fromEntries(c.entries());var n={isSubscribedFromQuery:"true"==r.SNSubscribed||"drip"==r.utm_source&&"email"==r.utm_medium,debug:r.sndebug||r.sleeknote_debug&&"1"||"",reset:r.snreset,editor:r.sneditor,preview:r.snpreview,timestamp:"?"+(Number("{{sleekNotetimestamp}}")||""),getBase:()=>i+a,local:i.includes("local."),custom(e,t){var r=n.CustomInitSettings[e];return r||t},hasCustomProp:e=>e in n.CustomInitSettings,expose:(e,r)=>(t.dev[r]=e,e),hooks:{},eventName:"eve"+ +new Date,needBadge:!1,getDomainLimits:function(){return n.DomainLimits},namespaces:new e.Set,CustomInitSettings:{},DomainLimits:{},SleekNotes:[]};return n.preview&&(n.mergeId=void 0===r.snmergeid?0:r.snmergeid),n}))}let h,g=t.arequire("package-core-boot"),{promises:v}=e;v.push(new e.Promise((function(e){h=e}))),e.Promise.allSettled(v.slice(0,-1)).then((function(){g.then((function(r){!async function({launcher:r,coreConfig:n,emit:o,API:s,CONST:l,storage:d,B:m,siteData:p},f){let h=c.get("sncampid"),g=1==c.get("snrules");function v(e){e=e.map((e=>{if(e.NS=u,!h||e.CampaignId==h)return g&&(e.rules&&e.rules.groups.forEach((function(e){e.conditions=[]})),delete e.targeting),e})).filter((e=>e)),n.SleekNotes.splice(0,0,...e)}n.namespaces.add(u),n.needBadge=!1;let w=Array.isArray(t[u])?t[u].pop():t[u];if(w)for(let[e,t]of Object.entries(w))if("SleekNotes"==e)c.has("snpreview")||v(t);else if("HideSleeknoteBadge"==e){if("SleekNote"==u&&!c.has("snpreview")){let e=t;void 0===t&&(e=!0),!e&&w.CustomerId>=790&&(n.needBadge=!0)}}else"object"==typeof t&&t?(n[e]||(n[e]={}),Object.assign(n[e],t)):void 0!==t&&(n[e]=t);await d.postCreate(),(n.local||n.reset)&&"n"!=n.reset&&await d.forceResetSession(n.reset);n.preview&&await e.Promise.all([import(i+a+"preview-utils.js"),import(i+a+"preview-toolbar.js")]).then((async function(e){let[{default:t},{default:r}]=e,i=await t.fetchHTMLConfig(n.preview);v(i),m.is.desktop&&r(i[0],n)}));t[u]&&!t[u].API&&(t[u].API=Promise.resolve(s),t[u].triggerOnClick=t[u].triggerOnclick=(...e)=>t[u].API.then((t=>t.call(t,"launch",...e))));p.initialize(),await r.add(n.SleekNotes);let b=await t.arequire("package-tracker");e.trackPageView||b.trackPageView(u)&&(e.trackPageView=!0);await o(l.CORE.EVENTS.LOAD,{NS:u,command:function(){try{return s.apply(null,arguments)}catch(e){console.warn("Error calling API",e)}}}),f()}(r,h)}))})),function(){try{return t.location!==t.parent.location}catch(e){}}()&&t.parent.postMessage(t.JSON.stringify({fingerprint:"SleekNote",command:"core-loaded"}),"*")}).call(this);